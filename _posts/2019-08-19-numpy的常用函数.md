---
layout: post
title: "numpy的常用函数"
date: 2019-08-19
tag: 数据分析
---

### 文件的读写

```python
# 存取TXT文件
import numpy as np
i2 = np.eye(3)  # 创建一个单位矩阵
np.savetxt("eye.txt", i2)  # 保存为TXT文件

# 处理CSV文件
# 比如下面这么一组数据，我想要处理科目和成绩，这张表是data.csv
s,g = loadtxt('data.csv',delimiters=',',usecols=(1,2),unpack=True)
# usecols表示用的是subject和grade这一列，unpack表示将不同列的数据分开存储
```

| name   | subject | grade | class | age  | birth      |
| ------ | ------- | ----- | ----- | ---- | ---------- |
| 张麻子 | 数学    | 129   | 08    | 22   | 1997-10-28 |
| 李光头 | 英语    | 140   | 08    | 21   | 1998-1-12  |

```python
# 以下是常用的数据处理函数
# 加权平均值
np.average(x, weights=y)  # 后面是权值
# 算术平均值
np.mean(g) # 平均成绩
np.max(g) # 最大成绩
np.min(g)
np.ptp(g)  # 计算数组的差值，即 np.max(g)-np.min(g)
np.median(g)  # 中位数
np.msort(g) # 按照从小到大排序
np.var(g) # 方差
np.diff(g) # 这个函数返回由相邻数组的差值构成的数组 
```

> numpy 是面向浮点运算的，需要对日期做一些特别的处理，否则会返回 ValueError错误，我们定义一个转换函数来处理这种情况.

```python
# 字符串转日期格式
def strTodate(s):
    return datetime.datetime.strptime(s,"%d-%m-%Y").date().weekday()

s,g = loadtxt('data.csv',delimiters=',',usecols=(1,5),unpack=True, converters={5:strTodate}) # 对第五条数据进行日期转换
```



转载请注明：[瞿晶的博客](http://fantongxue.xyz) » [点击阅读原文]([http://www.fantongxue.xyz/2019/08/numpy%E7%9A%84%E7%AE%80%E5%8D%95%E6%95%99%E7%A8%8B/](http://www.fantongxue.xyz/2019/08/numpy的简单教程/))     

